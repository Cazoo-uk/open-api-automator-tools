# consumer-finance-open-api-automator

This repository contains an example of how to automate the process to create interfaces, documentation and validation from an open api schema


### Documentation

The documentation is auto generated by using swagger ui html viewer. You can view the usage in the docs folder

#### index.html
This file will preload the openapi yml file defined by you, in the example it is called openapi-example.yml.

All the necessary swagger-ui dependencies are in the swagger-ui folder.

#### [link](https://animated-guacamole-4777b1e5.pages.github.io/)


### Types
Typescript interfaces are auto generated by using openapi-typescript. 

There is a script in the package json
```
openapi-typescript docs/openapiExample.yml --output types/openapiSchema/openapiExample.ts --prettier-config
```
#### [link](./types/openapiSchema/openapiExample.ts)


### Validation
To validate a http request we use a combination of 2 tools

- js-yaml
- AJV
#### js-yaml [link](https://github.com/nodeca/js-yaml)
JS-yaml allow us to convert an open api specification into a json file 
```js
const fileData = fs.readFileSync("docs/openapiExample.yml", 'utf8');
const yamlData = yaml.load(fileData);
```
[code link](./scripts/openApi/convertToTypescriptFile.ts) 

#### AJV [link](https://github.com/ajv-validator/ajv)

AJV is a schema validator. You can use your request body and validate it against the schema that weâ€™ve just generated

[code link](./validation/validation.ts)
